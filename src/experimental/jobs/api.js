"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Messages that can be sent TO a job. The job needs to listen to those.
 */
var JobInboundMessageKind;
(function (JobInboundMessageKind) {
    JobInboundMessageKind["Ping"] = "ip";
    JobInboundMessageKind["Stop"] = "is";
    // Channel specific messages.
    JobInboundMessageKind["Input"] = "in";
    // Input channel does not allow completion / error. Erroring this will just close the Subject
    // but not notify the job.
})(JobInboundMessageKind = exports.JobInboundMessageKind || (exports.JobInboundMessageKind = {}));
/**
 * Kind of messages that can be outputted from a job.
 */
var JobOutboundMessageKind;
(function (JobOutboundMessageKind) {
    // Lifecycle specific messages.
    JobOutboundMessageKind["OnReady"] = "c";
    JobOutboundMessageKind["Start"] = "s";
    JobOutboundMessageKind["End"] = "e";
    JobOutboundMessageKind["Pong"] = "p";
    // Feedback messages.
    JobOutboundMessageKind["Output"] = "o";
    // Channel specific messages.
    JobOutboundMessageKind["ChannelCreate"] = "cn";
    JobOutboundMessageKind["ChannelMessage"] = "cm";
    JobOutboundMessageKind["ChannelError"] = "ce";
    JobOutboundMessageKind["ChannelComplete"] = "cc";
})(JobOutboundMessageKind = exports.JobOutboundMessageKind || (exports.JobOutboundMessageKind = {}));
/**
 * The state of a job. These are changed as the job reports a new state through its messages.
 */
var JobState;
(function (JobState) {
    /**
     * The job was queued and is waiting to start.
     */
    JobState["Queued"] = "queued";
    /**
     * The job description was found, its dependencies (see "Synchronizing and Dependencies")
     * are done running, and the job's argument is validated and the job's code will be executed.
     */
    JobState["Ready"] = "ready";
    /**
     * The job has been started. The job implementation is expected to send this as soon as its
     * work is starting.
     */
    JobState["Started"] = "started";
    /**
     * The job has ended and is done running.
     */
    JobState["Ended"] = "ended";
    /**
     * An error occured and the job stopped because of internal state.
     */
    JobState["Errored"] = "errored";
})(JobState = exports.JobState || (exports.JobState = {}));
function isJobHandler(value) {
    return typeof value == 'function'
        && typeof value.jobDescription == 'object'
        && value.jobDescription !== null;
}
exports.isJobHandler = isJobHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyJwYWNrYWdlcy9hbmd1bGFyX2RldmtpdC9jb3JlL3NyYy9leHBlcmltZW50YWwvam9icy9hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUErREE7O0dBRUc7QUFDSCxJQUFZLHFCQVFYO0FBUkQsV0FBWSxxQkFBcUI7SUFDL0Isb0NBQVcsQ0FBQTtJQUNYLG9DQUFXLENBQUE7SUFFWCw2QkFBNkI7SUFDN0IscUNBQVksQ0FBQTtJQUNaLDZGQUE2RjtJQUM3RiwwQkFBMEI7QUFDNUIsQ0FBQyxFQVJXLHFCQUFxQixHQUFyQiw2QkFBcUIsS0FBckIsNkJBQXFCLFFBUWhDO0FBbUREOztHQUVHO0FBQ0gsSUFBWSxzQkFlWDtBQWZELFdBQVksc0JBQXNCO0lBQ2hDLCtCQUErQjtJQUMvQix1Q0FBYSxDQUFBO0lBQ2IscUNBQVcsQ0FBQTtJQUNYLG1DQUFTLENBQUE7SUFDVCxvQ0FBVSxDQUFBO0lBRVYscUJBQXFCO0lBQ3JCLHNDQUFZLENBQUE7SUFFWiw2QkFBNkI7SUFDN0IsOENBQW9CLENBQUE7SUFDcEIsK0NBQXFCLENBQUE7SUFDckIsNkNBQW1CLENBQUE7SUFDbkIsZ0RBQXNCLENBQUE7QUFDeEIsQ0FBQyxFQWZXLHNCQUFzQixHQUF0Qiw4QkFBc0IsS0FBdEIsOEJBQXNCLFFBZWpDO0FBcUlEOztHQUVHO0FBQ0gsSUFBWSxRQXVCWDtBQXZCRCxXQUFZLFFBQVE7SUFDbEI7O09BRUc7SUFDSCw2QkFBaUIsQ0FBQTtJQUNqQjs7O09BR0c7SUFDSCwyQkFBZSxDQUFBO0lBQ2Y7OztPQUdHO0lBQ0gsK0JBQW1CLENBQUE7SUFDbkI7O09BRUc7SUFDSCwyQkFBZSxDQUFBO0lBQ2Y7O09BRUc7SUFDSCwrQkFBbUIsQ0FBQTtBQUNyQixDQUFDLEVBdkJXLFFBQVEsR0FBUixnQkFBUSxLQUFSLGdCQUFRLFFBdUJuQjtBQXFKRCxTQUFnQixZQUFZLENBTTFCLEtBQVU7SUFDVixPQUFPLE9BQU8sS0FBSyxJQUFJLFVBQVU7V0FDMUIsT0FBTyxLQUFLLENBQUMsY0FBYyxJQUFJLFFBQVE7V0FDdkMsS0FBSyxDQUFDLGNBQWMsS0FBSyxJQUFJLENBQUM7QUFDdkMsQ0FBQztBQVZELG9DQVVDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEpzb25PYmplY3QsIEpzb25WYWx1ZSwgc2NoZW1hIH0gZnJvbSAnLi4vLi4vanNvbi9pbmRleCc7XG5pbXBvcnQgeyBEZWVwUmVhZG9ubHkgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleCc7XG5cbi8qKlxuICogQSBqb2IgbmFtZSBpcyBqdXN0IGEgc3RyaW5nIChuZWVkcyB0byBiZSBzZXJpYWxpemFibGUpLlxuICovXG5leHBvcnQgdHlwZSBKb2JOYW1lID0gc3RyaW5nO1xuXG5cbi8qKlxuICogVGhlIGpvYiBoYW5kbGVyIGZ1bmN0aW9uLCB3aGljaCBpcyBhIG1ldGhvZCB0aGF0J3MgZXhlY3V0ZWQgZm9yIHRoZSBqb2IuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iSGFuZGxlcjxcbiAgQXJnVCBleHRlbmRzIEpzb25WYWx1ZSxcbiAgSW5wdXRUIGV4dGVuZHMgSnNvblZhbHVlLFxuICBPdXRwdXRUIGV4dGVuZHMgSnNvblZhbHVlLFxuPiB7XG4gIChcbiAgICBhcmd1bWVudDogQXJnVCxcbiAgICBjb250ZXh0OiBKb2JIYW5kbGVyQ29udGV4dDxBcmdULCBJbnB1dFQsIE91dHB1dFQ+LFxuICApOiBPYnNlcnZhYmxlPEpvYk91dGJvdW5kTWVzc2FnZTxPdXRwdXRUPj47XG5cbiAgam9iRGVzY3JpcHRpb246IFBhcnRpYWw8Sm9iRGVzY3JpcHRpb24+O1xufVxuXG5cbi8qKlxuICogVGhlIGNvbnRleHQgaW4gd2hpY2ggdGhlIGpvYiBpcyBydW4uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iSGFuZGxlckNvbnRleHQ8XG4gIE1pbmltdW1Bcmd1bWVudFZhbHVlVCBleHRlbmRzIEpzb25WYWx1ZSA9IEpzb25WYWx1ZSxcbiAgTWluaW11bUlucHV0VmFsdWVUIGV4dGVuZHMgSnNvblZhbHVlID0gSnNvblZhbHVlLFxuICBNaW5pbXVtT3V0cHV0VmFsdWVUIGV4dGVuZHMgSnNvblZhbHVlID0gSnNvblZhbHVlLFxuPiB7XG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uOiBKb2JEZXNjcmlwdGlvbjtcbiAgcmVhZG9ubHkgc2NoZWR1bGVyOiBTY2hlZHVsZXI8SnNvblZhbHVlLCBKc29uVmFsdWUsIEpzb25WYWx1ZT47XG5cbiAgLy8gSW4gdGhpcyBjb250ZXh0LCBKc29uVmFsdWUgaXMgY29tcGFyYWJsZSB0byBgYW55YC5cbiAgcmVhZG9ubHkgZGVwZW5kZW5jaWVzOiBKb2I8SnNvblZhbHVlLCBKc29uVmFsdWUsIEpzb25WYWx1ZT5bXTtcblxuICByZWFkb25seSBpbmJvdW5kQnVzOiBPYnNlcnZhYmxlPEpvYkluYm91bmRNZXNzYWdlPE1pbmltdW1JbnB1dFZhbHVlVD4+O1xufVxuXG5cbi8qKlxuICogTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGEgam9iLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYkRlc2NyaXB0aW9uIGV4dGVuZHMgSnNvbk9iamVjdCB7XG4gIHJlYWRvbmx5IG5hbWU6IEpvYk5hbWU7XG5cbiAgcmVhZG9ubHkgYXJndW1lbnQ6IERlZXBSZWFkb25seTxzY2hlbWEuSnNvblNjaGVtYT47XG4gIHJlYWRvbmx5IGlucHV0OiBEZWVwUmVhZG9ubHk8c2NoZW1hLkpzb25TY2hlbWE+O1xuICByZWFkb25seSBvdXRwdXQ6IERlZXBSZWFkb25seTxzY2hlbWEuSnNvblNjaGVtYT47XG59XG5cbi8qKlxuICogTWVzc2FnZXMgdGhhdCBjYW4gYmUgc2VudCBUTyBhIGpvYi4gVGhlIGpvYiBuZWVkcyB0byBsaXN0ZW4gdG8gdGhvc2UuXG4gKi9cbmV4cG9ydCBlbnVtIEpvYkluYm91bmRNZXNzYWdlS2luZCB7XG4gIFBpbmcgPSAnaXAnLFxuICBTdG9wID0gJ2lzJyxcblxuICAvLyBDaGFubmVsIHNwZWNpZmljIG1lc3NhZ2VzLlxuICBJbnB1dCA9ICdpbicsXG4gIC8vIElucHV0IGNoYW5uZWwgZG9lcyBub3QgYWxsb3cgY29tcGxldGlvbiAvIGVycm9yLiBFcnJvcmluZyB0aGlzIHdpbGwganVzdCBjbG9zZSB0aGUgU3ViamVjdFxuICAvLyBidXQgbm90IG5vdGlmeSB0aGUgam9iLlxufVxuXG4vKiogQmFzZSBpbnRlcmZhY2UgZm9yIHRoZSBhbGwgam9iIGluYm91bmQgbWVzc2FnZXMuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYkluYm91bmRNZXNzYWdlQmFzZSBleHRlbmRzIEpzb25PYmplY3Qge1xuICAvKipcbiAgICogVGhlIGtpbmQgb2YgbWVzc2FnZSB0aGlzIGlzLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZDogSm9iSW5ib3VuZE1lc3NhZ2VLaW5kO1xufVxuXG4vKipcbiAqIEEgcGluZyB0byB0aGUgam9iLiBUaGUgam9iIHNob3VsZCByZXBseSB3aXRoIGEgcG9uZyBhcyBzb29uIGFzIHBvc3NpYmxlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYkluYm91bmRNZXNzYWdlUGluZyBleHRlbmRzIEpvYkluYm91bmRNZXNzYWdlQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYkluYm91bmRNZXNzYWdlS2luZC5QaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBJRCB0aGF0IHNob3VsZCBiZSByZXR1cm5lZCBpbiB0aGUgY29ycmVzcG9uZGluZyBQb25nLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBTdG9wIHRoZSBqb2IuIFRoaXMgaXMgaGFuZGxlZCBieSB0aGUgam9iIGl0c2VsZiBhbmQgam9icyBtaWdodCBub3QgaGFuZGxlIGl0LiBJdCB3aWxsIGFsc29cbiAqIHVuc3Vic2NyaWJlIGZyb20gdGhlIE9ic2VydmFibGU8Pi5cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBTSUdURVJNLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYkluYm91bmRNZXNzYWdlU3RvcCBleHRlbmRzIEpvYkluYm91bmRNZXNzYWdlQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYkluYm91bmRNZXNzYWdlS2luZC5TdG9wO1xufVxuXG4vKipcbiAqIEEgSm9iIHdhbnRzIHRvIHNlbmQgYSBtZXNzYWdlIHRvIGEgY2hhbm5lbC4gVGhpcyBjYW4gYmUgbWFyc2hhbGVkLCBhbmQgdGhlIEpvYiBvYmplY3RcbiAqIGhhcyBoZWxwZXJzIHRvIHRyYW5zZm9ybSB0aGlzIGludG8gYW4gb2JzZXJ2YWJsZS4gVGhlIGNvbnRleHQgYWxzbyBjYW4gY3JlYXRlIFJ4SlMgc3ViamVjdHMgdGhhdFxuICogbWFyc2hhbGwgbWVzc2FnZXMgdGhyb3VnaCBhIGNoYW5uZWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iSW5ib3VuZE1lc3NhZ2VJbnB1dDxJbnB1dFQgZXh0ZW5kcyBKc29uVmFsdWU+IGV4dGVuZHMgSm9iSW5ib3VuZE1lc3NhZ2VCYXNlIHtcbiAgcmVhZG9ubHkga2luZDogSm9iSW5ib3VuZE1lc3NhZ2VLaW5kLklucHV0O1xuXG4gIC8qKlxuICAgKiBUaGUgaW5wdXQgYmVpbmcgc2VudCB0byB0aGUgam9iLlxuICAgKi9cbiAgcmVhZG9ubHkgdmFsdWU6IElucHV0VDtcbn1cblxuZXhwb3J0IHR5cGUgSm9iSW5ib3VuZE1lc3NhZ2U8SW5wdXRUIGV4dGVuZHMgSnNvblZhbHVlPiA9XG4gIEpvYkluYm91bmRNZXNzYWdlUGluZ1xuICB8IEpvYkluYm91bmRNZXNzYWdlU3RvcFxuICB8IEpvYkluYm91bmRNZXNzYWdlSW5wdXQ8SW5wdXRUPlxuICA7XG5cbi8qKlxuICogS2luZCBvZiBtZXNzYWdlcyB0aGF0IGNhbiBiZSBvdXRwdXR0ZWQgZnJvbSBhIGpvYi5cbiAqL1xuZXhwb3J0IGVudW0gSm9iT3V0Ym91bmRNZXNzYWdlS2luZCB7XG4gIC8vIExpZmVjeWNsZSBzcGVjaWZpYyBtZXNzYWdlcy5cbiAgT25SZWFkeSA9ICdjJyxcbiAgU3RhcnQgPSAncycsXG4gIEVuZCA9ICdlJyxcbiAgUG9uZyA9ICdwJyxcblxuICAvLyBGZWVkYmFjayBtZXNzYWdlcy5cbiAgT3V0cHV0ID0gJ28nLFxuXG4gIC8vIENoYW5uZWwgc3BlY2lmaWMgbWVzc2FnZXMuXG4gIENoYW5uZWxDcmVhdGUgPSAnY24nLFxuICBDaGFubmVsTWVzc2FnZSA9ICdjbScsXG4gIENoYW5uZWxFcnJvciA9ICdjZScsXG4gIENoYW5uZWxDb21wbGV0ZSA9ICdjYycsXG59XG5cbi8qKiBCYXNlIGludGVyZmFjZSBmb3IgdGhlIGFsbCBqb2IgbWVzc2FnZXMuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYk91dGJvdW5kTWVzc2FnZUJhc2Uge1xuICAvKipcbiAgICogVGhlIGpvYiBkZXNjcmlwdGlvbi5cbiAgICovXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uOiBKb2JEZXNjcmlwdGlvbjtcblxuICAvKipcbiAgICogVGhlIGtpbmQgb2YgbWVzc2FnZSB0aGlzIGlzLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZDogSm9iT3V0Ym91bmRNZXNzYWdlS2luZDtcbn1cblxuLyoqXG4gKiBUaGUgam9iIGhhcyBiZWVuIGNyZWF0ZWQgYW5kIHdpbGwgdmFsaWRhdGUgaXRzIGlucHV0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYk91dGJvdW5kTWVzc2FnZU9uUmVhZHkgZXh0ZW5kcyBKb2JPdXRib3VuZE1lc3NhZ2VCYXNlIHtcbiAgcmVhZG9ubHkga2luZDogSm9iT3V0Ym91bmRNZXNzYWdlS2luZC5PblJlYWR5O1xufVxuXG4vKipcbiAqIFRoZSBqb2Igc3RhcnRlZC4gVGhpcyBpcyBkb25lIGJ5IHRoZSBqb2IgaXRzZWxmLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYk91dGJvdW5kTWVzc2FnZVN0YXJ0IGV4dGVuZHMgSm9iT3V0Ym91bmRNZXNzYWdlQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYk91dGJvdW5kTWVzc2FnZUtpbmQuU3RhcnQ7XG59XG5cbi8qKlxuICogQW4gb3V0cHV0IHZhbHVlIGlzIGF2YWlsYWJsZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKb2JPdXRib3VuZE1lc3NhZ2VPdXRwdXQ8XG4gIE91dHB1dFQgZXh0ZW5kcyBKc29uVmFsdWUsXG4+IGV4dGVuZHMgSm9iT3V0Ym91bmRNZXNzYWdlQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYk91dGJvdW5kTWVzc2FnZUtpbmQuT3V0cHV0O1xuXG4gIC8qKlxuICAgKiBUaGUgbWVzc2FnZSBiZWluZyBvdXRwdXR0ZWQgZnJvbSB0aGUgam9iLlxuICAgKi9cbiAgcmVhZG9ubHkgdmFsdWU6IE91dHB1dFQ7XG59XG5cblxuLyoqXG4gKiBCYXNlIGludGVyZmFjZSBmb3IgYWxsIGpvYiBtZXNzYWdlIHJlbGF0ZWQgdG8gY2hhbm5lbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbEJhc2UgZXh0ZW5kcyBKb2JPdXRib3VuZE1lc3NhZ2VCYXNlIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjaGFubmVsLlxuICAgKi9cbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEEgam9iIHdhbnRzIHRvIHNlbmQgYSBtZXNzYWdlIHRvIGEgY2hhbm5lbC4gVGhpcyBjYW4gYmUgbWFyc2hhbGVkLCBhbmQgdGhlIEpvYiBvYmplY3RcbiAqIGhhcyBoZWxwZXJzIHRvIHRyYW5zZm9ybSB0aGlzIGludG8gYW4gb2JzZXJ2YWJsZS4gVGhlIGNvbnRleHQgYWxzbyBjYW4gY3JlYXRlIFJ4SlMgc3ViamVjdHMgdGhhdFxuICogbWFyc2hhbGwgbWVzc2FnZXMgdGhyb3VnaCBhIGNoYW5uZWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbE1lc3NhZ2UgZXh0ZW5kcyBKb2JPdXRib3VuZE1lc3NhZ2VDaGFubmVsQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYk91dGJvdW5kTWVzc2FnZUtpbmQuQ2hhbm5lbE1lc3NhZ2U7XG5cbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIGJlaW5nIHNlbnQgdG8gdGhlIGNoYW5uZWwuXG4gICAqL1xuICByZWFkb25seSBtZXNzYWdlOiBKc29uVmFsdWU7XG59XG5cbi8qKlxuICogQSBqb2Igd2FudHMgdG8gc2VuZCBhbiBlcnJvciB0byBvbmUgb2YgaXRzIGNoYW5uZWwuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb2YgdGhyb3dpbmcgdGhyb3VnaFxuICogYW4gT2JzZXJ2YWJsZS4gVGhlIHNpZGUgY2hhbm5lbCB3aWxsIG5vdCByZWNlaXZlIGFueSBtb3JlIG1lc3NhZ2VzIGFmdGVyIHRoaXMsIGFuZCB3aWxsIG5vdFxuICogY29tcGxldGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbEVycm9yIGV4dGVuZHMgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbEJhc2Uge1xuICByZWFkb25seSBraW5kOiBKb2JPdXRib3VuZE1lc3NhZ2VLaW5kLkNoYW5uZWxFcnJvcjtcblxuICAvKipcbiAgICogVGhlIGVycm9yIG1lc3NhZ2UgYmVpbmcgc2VudCB0byB0aGUgY2hhbm5lbC5cbiAgICovXG4gIHJlYWRvbmx5IGVycm9yOiBKc29uVmFsdWU7XG59XG5cbi8qKlxuICogQSBqb2Igd2FudHMgdG8gY3JlYXRlIGEgbmV3IGNoYW5uZWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbENyZWF0ZSBleHRlbmRzIEpvYk91dGJvdW5kTWVzc2FnZUNoYW5uZWxCYXNlIHtcbiAgcmVhZG9ubHkga2luZDogSm9iT3V0Ym91bmRNZXNzYWdlS2luZC5DaGFubmVsQ3JlYXRlO1xufVxuXG4vKipcbiAqIEEgam9iIHdhbnRzIHRvIGNsb3NlIHRoZSBjaGFubmVsLCBhcyBjb21wbGV0ZWQuIFRoaXMgaXMgZG9uZSBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlIGpvYiBlbmRzLFxuICogb3IgY2FuIGJlIGRvbmUgZnJvbSB0aGUgam9iIHRvIGNsb3NlIGl0LiBBIGNsb3NlZCBjaGFubmVsIG1pZ2h0IGJlIHJlb3BlbmVkLCBidXQgdGhlIHVzZXJcbiAqIG5lZWQgdG8gcmVjYWxsIGdldENoYW5uZWwoKS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKb2JPdXRib3VuZE1lc3NhZ2VDaGFubmVsQ29tcGxldGUgZXh0ZW5kcyBKb2JPdXRib3VuZE1lc3NhZ2VDaGFubmVsQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYk91dGJvdW5kTWVzc2FnZUtpbmQuQ2hhbm5lbENvbXBsZXRlO1xufVxuXG4vKipcbiAqIE9uRW5kIG9mIHRoZSBqb2IgcnVuLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvYk91dGJvdW5kTWVzc2FnZUVuZCBleHRlbmRzIEpvYk91dGJvdW5kTWVzc2FnZUJhc2Uge1xuICByZWFkb25seSBraW5kOiBKb2JPdXRib3VuZE1lc3NhZ2VLaW5kLkVuZDtcbn1cblxuLyoqXG4gKiBBIHBvbmcgcmVzcG9uc2UgZnJvbSBhIHBpbmcgaW5wdXQuIFRoZSBpZCBpcyB0aGUgc2FtZSBhcyB0aGUgb25lIHBhc3NlZCBpbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKb2JPdXRib3VuZE1lc3NhZ2VQb25nIGV4dGVuZHMgSm9iT3V0Ym91bmRNZXNzYWdlQmFzZSB7XG4gIHJlYWRvbmx5IGtpbmQ6IEpvYk91dGJvdW5kTWVzc2FnZUtpbmQuUG9uZztcblxuICAvKipcbiAgICogVGhlIElEIHRoYXQgd2FzIHBhc3NlZCBpbiB0aGUgYFBpbmdgIG1lc3NhZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBHZW5lcmljIG1lc3NhZ2UgdHlwZS5cbiAqL1xuZXhwb3J0IHR5cGUgSm9iT3V0Ym91bmRNZXNzYWdlPE91dHB1dFQgZXh0ZW5kcyBKc29uVmFsdWU+ID1cbiAgSm9iT3V0Ym91bmRNZXNzYWdlT25SZWFkeVxuICB8IEpvYk91dGJvdW5kTWVzc2FnZVN0YXJ0XG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlT3V0cHV0PE91dHB1dFQ+XG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbENyZWF0ZVxuICB8IEpvYk91dGJvdW5kTWVzc2FnZUNoYW5uZWxNZXNzYWdlXG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbEVycm9yXG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlQ2hhbm5lbENvbXBsZXRlXG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlRW5kXG4gIHwgSm9iT3V0Ym91bmRNZXNzYWdlUG9uZ1xuICA7XG5cblxuLyoqXG4gKiBUaGUgc3RhdGUgb2YgYSBqb2IuIFRoZXNlIGFyZSBjaGFuZ2VkIGFzIHRoZSBqb2IgcmVwb3J0cyBhIG5ldyBzdGF0ZSB0aHJvdWdoIGl0cyBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGVudW0gSm9iU3RhdGUge1xuICAvKipcbiAgICogVGhlIGpvYiB3YXMgcXVldWVkIGFuZCBpcyB3YWl0aW5nIHRvIHN0YXJ0LlxuICAgKi9cbiAgUXVldWVkID0gJ3F1ZXVlZCcsXG4gIC8qKlxuICAgKiBUaGUgam9iIGRlc2NyaXB0aW9uIHdhcyBmb3VuZCwgaXRzIGRlcGVuZGVuY2llcyAoc2VlIFwiU3luY2hyb25pemluZyBhbmQgRGVwZW5kZW5jaWVzXCIpXG4gICAqIGFyZSBkb25lIHJ1bm5pbmcsIGFuZCB0aGUgam9iJ3MgYXJndW1lbnQgaXMgdmFsaWRhdGVkIGFuZCB0aGUgam9iJ3MgY29kZSB3aWxsIGJlIGV4ZWN1dGVkLlxuICAgKi9cbiAgUmVhZHkgPSAncmVhZHknLFxuICAvKipcbiAgICogVGhlIGpvYiBoYXMgYmVlbiBzdGFydGVkLiBUaGUgam9iIGltcGxlbWVudGF0aW9uIGlzIGV4cGVjdGVkIHRvIHNlbmQgdGhpcyBhcyBzb29uIGFzIGl0c1xuICAgKiB3b3JrIGlzIHN0YXJ0aW5nLlxuICAgKi9cbiAgU3RhcnRlZCA9ICdzdGFydGVkJyxcbiAgLyoqXG4gICAqIFRoZSBqb2IgaGFzIGVuZGVkIGFuZCBpcyBkb25lIHJ1bm5pbmcuXG4gICAqL1xuICBFbmRlZCA9ICdlbmRlZCcsXG4gIC8qKlxuICAgKiBBbiBlcnJvciBvY2N1cmVkIGFuZCB0aGUgam9iIHN0b3BwZWQgYmVjYXVzZSBvZiBpbnRlcm5hbCBzdGF0ZS5cbiAgICovXG4gIEVycm9yZWQgPSAnZXJyb3JlZCcsXG59XG5cblxuLyoqXG4gKiBBIEpvYiBpbnN0YW5jZSwgcmV0dXJuZWQgZnJvbSBzY2hlZHVsaW5nIGEgam9iLiBBIEpvYiBpbnN0YW5jZSBpcyBfbm90XyBzZXJpYWxpemFibGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9iPFxuICBBcmd1bWVudFQgZXh0ZW5kcyBKc29uVmFsdWUgPSBKc29uVmFsdWUsXG4gIElucHV0VCBleHRlbmRzIEpzb25WYWx1ZSA9IEpzb25WYWx1ZSxcbiAgT3V0cHV0VCBleHRlbmRzIEpzb25WYWx1ZSA9IEpzb25WYWx1ZSxcbj4ge1xuICAvKipcbiAgICogRGVzY3JpcHRpb24gb2YgdGhlIGpvYi4gUmVzb2x2aW5nIHRoZSBqb2IncyBkZXNjcmlwdGlvbiBjYW4gYmUgZG9uZSBhc3luY2hyb25vdXNseSwgc28gdGhpc1xuICAgKiBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gaXQncyByZWFkeS5cbiAgICovXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uOiBPYnNlcnZhYmxlPEpvYkRlc2NyaXB0aW9uPjtcblxuICAvKipcbiAgICogQXJndW1lbnQgc2VudCB3aGVuIHNjaGVkdWxpbmcgdGhlIGpvYi4gVGhpcyBpcyBhIGNvcHkgb2YgdGhlIGFyZ3VtZW50LlxuICAgKi9cbiAgcmVhZG9ubHkgYXJndW1lbnQ6IEFyZ3VtZW50VDtcblxuICAvKipcbiAgICogVGhlIGlucHV0IHRvIHRoZSBqb2IuIFRoaXMgZ29lcyB0aHJvdWdoIHRoZSBpbnB1dCBjaGFubmVsIGFzIG1lc3NhZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaW5wdXQ6IE9ic2VydmVyPElucHV0VD47XG5cbiAgLyoqXG4gICAqIE91dHB1dHMgb2YgdGhpcyBqb2IuXG4gICAqL1xuICByZWFkb25seSBvdXRwdXQ6IE9ic2VydmFibGU8T3V0cHV0VD47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBqb2IuXG4gICAqL1xuICByZWFkb25seSBzdGF0ZTogSm9iU3RhdGU7XG5cbiAgLyoqXG4gICAqIEdldCBhIGNoYW5uZWwgdGhhdCB2YWxpZGF0ZXMgYWdhaW5zdCB0aGUgc2NoZW1hLiBNZXNzYWdlcyB3aWxsIGJlIGZpbHRlcmVkIGJ5IHRoZSBzY2hlbWEuXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjaGFubmVsLlxuICAgKiBAcGFyYW0gc2NoZW1hIEEgc2NoZW1hIHRvIHVzZSB0byB2YWxpZGF0ZSBtZXNzYWdlcy5cbiAgICovXG4gIGdldENoYW5uZWw8VCBleHRlbmRzIEpzb25WYWx1ZT4obmFtZTogc3RyaW5nLCBzY2hlbWE/OiBzY2hlbWEuSnNvblNjaGVtYSk6IE9ic2VydmFibGU8VD47XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBqb2IgYW5kIHdhaXQgZm9yIHRoZSByZXN1bHRpbmcgUG9uZyBiZWZvcmUgY29tcGxldGluZy5cbiAgICovXG4gIHBpbmcoKTogT2JzZXJ2YWJsZTxuZXZlcj47XG5cbiAgLyoqXG4gICAqIFN0b3BzIHRoZSBqb2IgZnJvbSBydW5uaW5nLiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIHVuc3Vic2NyaWJpbmcgZnJvbSB0aGUgb3V0cHV0IGFzIGluIGl0XG4gICAqIHNlbmRzIHRoZSBKb2JJbmJvdW5kTWVzc2FnZUtpbmQuU3RvcCByYXcgaW5wdXQgdG8gdGhlIGpvYi5cbiAgICovXG4gIHN0b3AoKTogdm9pZDtcblxuICAvKipcbiAgICogVGhlIEpvYkluYm91bmRNZXNzYWdlIG1lc3NhZ2VzIFRPIHRoZSBqb2IuXG4gICAqL1xuICByZWFkb25seSBpbmJvdW5kQnVzOiBPYnNlcnZlcjxKb2JJbmJvdW5kTWVzc2FnZTxJbnB1dFQ+PjtcblxuICAvKipcbiAgICogVGhlIEpvYk91dGJvdW5kTWVzc2FnZSBGUk9NIHRoZSBqb2IuXG4gICAqL1xuICByZWFkb25seSBvdXRib3VuZEJ1czogT2JzZXJ2YWJsZTxKb2JPdXRib3VuZE1lc3NhZ2U8T3V0cHV0VD4+O1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHNjaGVkdWxpbmcgam9icy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTY2hlZHVsZUpvYk9wdGlvbnMge1xuICAvKipcbiAgICogSm9icyB0aGF0IG5lZWQgdG8gZmluaXNoIGJlZm9yZSBzY2hlZHVsaW5nIHRoaXMgam9iLiBUaGVzZSBkZXBlbmRlbmNpZXMgd2lsbCBiZSBwYXNzZWRcbiAgICogdG8gdGhlIGpvYiBpdHNlbGYgaW4gaXRzIGNvbnRleHQuXG4gICAqL1xuICBkZXBlbmRlbmNpZXM/OiBKb2IgfCBKb2JbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RyeTxcbiAgTWluaW11bUFyZ3VtZW50VmFsdWVUIGV4dGVuZHMgSnNvblZhbHVlID0gSnNvblZhbHVlLFxuICBNaW5pbXVtSW5wdXRWYWx1ZVQgZXh0ZW5kcyBKc29uVmFsdWUgPSBKc29uVmFsdWUsXG4gIE1pbmltdW1PdXRwdXRWYWx1ZVQgZXh0ZW5kcyBKc29uVmFsdWUgPSBKc29uVmFsdWUsXG4+IHtcbiAgLyoqXG4gICAqIEdldCBhIGpvYiBoYW5kbGVyLlxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgam9iIHRvIGdldCBhIGhhbmRsZXIgZnJvbS5cbiAgICovXG4gIGdldDxcbiAgICBBIGV4dGVuZHMgTWluaW11bUFyZ3VtZW50VmFsdWVULFxuICAgIEkgZXh0ZW5kcyBNaW5pbXVtSW5wdXRWYWx1ZVQsXG4gICAgTyBleHRlbmRzIE1pbmltdW1PdXRwdXRWYWx1ZVQsXG4gID4obmFtZTogSm9iTmFtZSk6IE9ic2VydmFibGU8Sm9iSGFuZGxlcjxBLCBJLCBPPiB8IG51bGw+O1xufVxuXG4vKipcbiAqIEFuIGludGVyZmFjZSB0aGF0IGNhbiBzY2hlZHVsZSBqb2JzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlcjxcbiAgTWluaW11bUFyZ3VtZW50VmFsdWVUIGV4dGVuZHMgSnNvblZhbHVlID0gSnNvblZhbHVlLFxuICBNaW5pbXVtSW5wdXRWYWx1ZVQgZXh0ZW5kcyBKc29uVmFsdWUgPSBKc29uVmFsdWUsXG4gIE1pbmltdW1PdXRwdXRWYWx1ZVQgZXh0ZW5kcyBKc29uVmFsdWUgPSBKc29uVmFsdWUsXG4+IHtcbiAgLyoqXG4gICAqIEdldCBhIGpvYiBkZXNjcmlwdGlvbiBmb3IgYSBuYW1lZCBqb2IuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBqb2IuXG4gICAqIEByZXR1cm5zIEEgZGVzY3JpcHRpb24sIG9yIG51bGwgaWYgbm8gZGVzY3JpcHRpb24gaXMgYXZhaWxhYmxlIGZvciB0aGlzIGpvYi5cbiAgICovXG4gIGdldERlc2NyaXB0aW9uKG5hbWU6IEpvYk5hbWUpOiBPYnNlcnZhYmxlPEpvYkRlc2NyaXB0aW9uIHwgbnVsbD47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgam9iIG5hbWUgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGpvYi5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgam9iIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaGFzKG5hbWU6IEpvYk5hbWUpOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBQYXVzZSB0aGUgc2NoZWR1bGVyLCB0ZW1wb3JhcnkgcXVldWVpbmcgX25ld18gam9icy4gUmV0dXJucyBhIHJlc3VtZSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZVxuICAgKiB1c2VkIHRvIHJlc3VtZSBleGVjdXRpb24uIElmIG11bHRpcGxlIGBwYXVzZSgpYCB3ZXJlIGNhbGxlZCwgYWxsIHRoZWlyIHJlc3VtZSBmdW5jdGlvbnMgbXVzdFxuICAgKiBiZSBjYWxsZWQgYmVmb3JlIHRoZSBTY2hlZHVsZXIgYWN0dWFsbHkgc3RhcnRzIG5ldyBqb2JzLiBBZGRpdGlvbmFsIGNhbGxzIHRvIHRoZSBzYW1lIHJlc3VtZVxuICAgKiBmdW5jdGlvbiB3aWxsIGhhdmUgbm8gZWZmZWN0LlxuICAgKlxuICAgKiBKb2JzIGFscmVhZHkgcnVubmluZyBhcmUgTk9UIHBhdXNlZC4gVGhpcyBpcyBwYXVzaW5nIHRoZSBzY2hlZHVsZXIgb25seS5cbiAgICpcbiAgICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBydW4gdG8gcmVzdW1lIHRoZSBzY2hlZHVsZXIuIElmIG11bHRpcGxlIGBwYXVzZSgpYCBjYWxsc1xuICAgKiAgICAgICAgICB3ZXJlIG1hZGUsIGFsbCB0aGVpciByZXR1cm4gZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgKGluIGFueSBvcmRlcikgYmVmb3JlIHRoZVxuICAgKiAgICAgICAgICBzY2hlZHVsZXIgY2FuIHJlc3VtZS5cbiAgICovXG4gIHBhdXNlKCk6ICgpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgam9iIHRvIGJlIHJ1biwgdXNpbmcgaXRzIG5hbWUuXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIGpvYiB0byBiZSBydW4uXG4gICAqIEBwYXJhbSBhcmd1bWVudCBUaGUgYXJndW1lbnQgdG8gc2VuZCB0byB0aGUgam9iIHdoZW4gc3RhcnRpbmcgaXQuXG4gICAqIEBwYXJhbSBvcHRpb25zIFNjaGVkdWxpbmcgb3B0aW9ucy5cbiAgICogQHJldHVybnMgVGhlIGpvYiBiZWluZyBydW4uXG4gICAqL1xuICBzY2hlZHVsZTxcbiAgICBBIGV4dGVuZHMgTWluaW11bUFyZ3VtZW50VmFsdWVULFxuICAgIEkgZXh0ZW5kcyBNaW5pbXVtSW5wdXRWYWx1ZVQsXG4gICAgTyBleHRlbmRzIE1pbmltdW1PdXRwdXRWYWx1ZVQsXG4gID4oXG4gICAgbmFtZTogSm9iTmFtZSxcbiAgICBhcmd1bWVudDogQSxcbiAgICBvcHRpb25zPzogU2NoZWR1bGVKb2JPcHRpb25zLFxuICApOiBKb2I8QSwgSSwgTz47XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSm9iSGFuZGxlcjxcbiAgQSBleHRlbmRzIEpzb25WYWx1ZSxcbiAgSSBleHRlbmRzIEpzb25WYWx1ZSxcbiAgTyBleHRlbmRzIEpzb25WYWx1ZSxcbi8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIHVua25vd25cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbj4odmFsdWU6IGFueSk6IHZhbHVlIGlzIEpvYkhhbmRsZXI8QSwgSSwgTz4ge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbidcbiAgICAgICYmIHR5cGVvZiB2YWx1ZS5qb2JEZXNjcmlwdGlvbiA9PSAnb2JqZWN0J1xuICAgICAgJiYgdmFsdWUuam9iRGVzY3JpcHRpb24gIT09IG51bGw7XG59XG4iXX0=