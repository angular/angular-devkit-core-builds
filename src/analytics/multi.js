"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Analytics implementation that reports to multiple analytics backend.
 */
class MultiAnalytics {
    constructor(_backends = []) {
        this._backends = _backends;
    }
    push(...backend) {
        this._backends.push(...backend);
    }
    event(category, action, options) {
        this._backends.forEach(be => be.event(category, action, options));
    }
    screenview(screenName, appName, options) {
        this._backends.forEach(be => be.screenview(screenName, appName, options));
    }
    pageview(path, options) {
        this._backends.forEach(be => be.pageview(path, options));
    }
    timing(category, variable, time, options) {
        this._backends.forEach(be => be.timing(category, variable, time, options));
    }
    flush() {
        return Promise.all(this._backends.map(x => x.flush())).then(() => { });
    }
}
exports.MultiAnalytics = MultiAnalytics;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGkuanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbInBhY2thZ2VzL2FuZ3VsYXJfZGV2a2l0L2NvcmUvc3JjL2FuYWx5dGljcy9tdWx0aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOztBQUlIOztHQUVHO0FBQ0gsTUFBYSxjQUFjO0lBQ3pCLFlBQXNCLFlBQXlCLEVBQUU7UUFBM0IsY0FBUyxHQUFULFNBQVMsQ0FBa0I7SUFBRyxDQUFDO0lBRXJELElBQUksQ0FBQyxHQUFHLE9BQW9CO1FBQzFCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVELEtBQUssQ0FBQyxRQUFnQixFQUFFLE1BQWMsRUFBRSxPQUFzQjtRQUM1RCxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFDRCxVQUFVLENBQUMsVUFBa0IsRUFBRSxPQUFlLEVBQUUsT0FBMkI7UUFDekUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1RSxDQUFDO0lBQ0QsUUFBUSxDQUFDLElBQVksRUFBRSxPQUF5QjtRQUM5QyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUNELE1BQU0sQ0FBQyxRQUFnQixFQUFFLFFBQWdCLEVBQUUsSUFBcUIsRUFBRSxPQUF1QjtRQUN2RixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBR0QsS0FBSztRQUNILE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7Q0FDRjtBQXhCRCx3Q0F3QkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbmltcG9ydCB7IEFuYWx5dGljcywgRXZlbnRPcHRpb25zLCBQYWdldmlld09wdGlvbnMsIFNjcmVlbnZpZXdPcHRpb25zLCBUaW1pbmdPcHRpb25zIH0gZnJvbSAnLi9hcGknO1xuXG4vKipcbiAqIEFuYWx5dGljcyBpbXBsZW1lbnRhdGlvbiB0aGF0IHJlcG9ydHMgdG8gbXVsdGlwbGUgYW5hbHl0aWNzIGJhY2tlbmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aUFuYWx5dGljcyBpbXBsZW1lbnRzIEFuYWx5dGljcyB7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfYmFja2VuZHM6IEFuYWx5dGljc1tdID0gW10pIHt9XG5cbiAgcHVzaCguLi5iYWNrZW5kOiBBbmFseXRpY3NbXSkge1xuICAgIHRoaXMuX2JhY2tlbmRzLnB1c2goLi4uYmFja2VuZCk7XG4gIH1cblxuICBldmVudChjYXRlZ29yeTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgb3B0aW9ucz86IEV2ZW50T3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX2JhY2tlbmRzLmZvckVhY2goYmUgPT4gYmUuZXZlbnQoY2F0ZWdvcnksIGFjdGlvbiwgb3B0aW9ucykpO1xuICB9XG4gIHNjcmVlbnZpZXcoc2NyZWVuTmFtZTogc3RyaW5nLCBhcHBOYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBTY3JlZW52aWV3T3B0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX2JhY2tlbmRzLmZvckVhY2goYmUgPT4gYmUuc2NyZWVudmlldyhzY3JlZW5OYW1lLCBhcHBOYW1lLCBvcHRpb25zKSk7XG4gIH1cbiAgcGFnZXZpZXcocGF0aDogc3RyaW5nLCBvcHRpb25zPzogUGFnZXZpZXdPcHRpb25zKTogdm9pZCB7XG4gICAgdGhpcy5fYmFja2VuZHMuZm9yRWFjaChiZSA9PiBiZS5wYWdldmlldyhwYXRoLCBvcHRpb25zKSk7XG4gIH1cbiAgdGltaW5nKGNhdGVnb3J5OiBzdHJpbmcsIHZhcmlhYmxlOiBzdHJpbmcsIHRpbWU6IHN0cmluZyB8IG51bWJlciwgb3B0aW9ucz86IFRpbWluZ09wdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9iYWNrZW5kcy5mb3JFYWNoKGJlID0+IGJlLnRpbWluZyhjYXRlZ29yeSwgdmFyaWFibGUsIHRpbWUsIG9wdGlvbnMpKTtcbiAgfVxuXG5cbiAgZmx1c2goKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuX2JhY2tlbmRzLm1hcCh4ID0+IHguZmx1c2goKSkpLnRoZW4oKCkgPT4ge30pO1xuICB9XG59XG4iXX0=